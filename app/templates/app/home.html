{% extends 'app/base.html' %}
{% load static %}
{% load humanize %}
{% load url_helpers %}

{% block banner_slider %}
<div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel" data-bs-interval="1000">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
      <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="3" aria-label="Slide 4"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active" data-bs-interval="3000">
        <img src="{% static 'app/images/banner/b1.jpg' %}" class="d-block w-100" alt="..." height="480">
      </div>
      <div class="carousel-item" data-bs-interval="3000">
        <img src="{% static 'app/images/banner/b2.jpg' %}" class="d-block w-100" alt="..." height="480">
      </div>
      <div class="carousel-item" data-bs-interval="3000">
        <img src="{% static 'app/images/banner/b3.jpg' %}" class="d-block w-100" alt="..." height="480">
      </div>
      <div class="carousel-item" data-bs-interval="3000">
        <img src="{% static 'app/images/banner/b3.jpg' %}" class="d-block w-100" alt="..." height="480">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
</div>
{% endblock banner_slider %}
{% block main-content %}
<div class="d-flex justify-content-end align-items-center mt-3" style="gap:10px;">
  <label class="mb-0">Sắp xếp:</label>
  <div class="btn-group">
    <a class="btn btn-outline-secondary {% if current_sort == 'price_asc' %}active{% endif %}"
       href="{% url_replace sort='price_asc' %}">Giá ↑</a>
    <a class="btn btn-outline-secondary {% if current_sort == 'price_desc' %}active{% endif %}"
       href="{% url_replace sort='price_desc' %}">Giá ↓</a>
    <a class="btn btn-outline-secondary {% if not current_sort %}active{% endif %}"
       href="{% url_replace sort=None %}">Mặc định</a>
  </div>
</div>
<div class="row" style="width:100%;">
  {% for product in products %}
  <div class="col-lg-3">
    <img class="thumbnail" src="{{product.ImageURL}}">
    <h6><strong>{{product.name}}</strong></h6>
    <p style="color: {% if product.stock > 0 %}green{% else %}red{% endif %}">
    {% if product.stock > 0 %}
        Còn lại: {{ product.stock }}
    {% else %}
        TẠM HẾT HÀNG
    {% endif %}
</p>

    <hr>
    <div class="d-flex justify-content-between align-items-center mt-2">
        <div>
            {% if product.stock > 0 %}
                <button
                    id="add-to-cart"
                    data-product="{{product.id}}"
                    data-action="add"
                    class="btn btn-outline-secondary add-btn update-cart">
                    Thêm vào giỏ
                </button>
            {% else %}
                <button class="btn btn-danger" disabled>Tạm hết hàng</button>
            {% endif %}
            <a class="btn btn-outline-success" href="{% url 'detail' %}?id={{product.id}}">View</a>
        </div>

        <div class="product-price" style="white-space: nowrap; font-size: 22px; font-weight: bold; margin-left: 8px;">
            {{ product.price|intcomma }} VNĐ
        </div>
    </div>




  </div>
  {% endfor %}
</div>
<br/><br/><br/>
{% endblock main-content %}