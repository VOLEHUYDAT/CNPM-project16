{% extends 'app/base.html' %}
{% load static %}
{% load humanize %}
{% load url_helpers %}
{% block category %}
<div style='padding-top:100px; width: 100%; padding-bottom: 50px;'>
  <div class="d-flex justify-content-end align-items-center mb-2" style="gap:10px;">
    <label class="mb-0">Sắp xếp:</label>
    <div class="btn-group">
      <a class="btn btn-outline-secondary {% if current_sort == 'price_asc' %}active{% endif %}"
         href="{% url_replace sort='price_asc' %}">Giá ↑</a>
      <a class="btn btn-outline-secondary {% if current_sort == 'price_desc' %}active{% endif %}"
         href="{% url_replace sort='price_desc' %}">Giá ↓</a>
      <a class="btn btn-outline-secondary {% if not current_sort %}active{% endif %}"
         href="{% url_replace sort=None %}">Mặc định</a>
    </div>
  </div>
<div class="row" style="width:100%;">
    {% for product in products %}
    <div class="col-lg-3">
      <img class="thumbnail" src="{{product.ImageURL}}">
      <h6><strong>{{product.name}}</strong></h6>
      <p style="color: {% if product.stock > 0 %}green{% else %}red{% endif %}">
      {% if product.stock > 0 %}
          Còn lại: {{ product.stock }}
      {% else %}
          TẠM HẾT HÀNG
      {% endif %}
</p>

      <hr>
      {% if product.stock > 0 %}
          <button
              id="add-to-cart"
              data-product="{{product.id}}"
              data-action="add"
              class="btn btn-outline-secondary add-btn update-cart">
              Thêm vào giỏ
          </button>
      {% else %}
          <button class="btn btn-danger" disabled>Tạm hết hàng</button>
      {% endif %}
      <a class="btn btn-outline-success" href="{% url 'detail' %}?id={{product.id}}">View</a>
      <div class="product-price" style="text-align:center; white-space: nowrap; font-size: 22px; font-weight: bold;">
        {{ product.price|intcomma }} VNĐ
      </div>3>

  
    </div>
    {% endfor %}
  </div>
</div>
{% endblock category %}